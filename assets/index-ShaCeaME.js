var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{p as a}from"./phaser-3q6lwrpP.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const s=class e{static isAnimaInicial(){return e.animaInicial}static isGameOver(){return e.gameOver}static getScreen(){return e.screen}static getPuntos(){return e.puntos}static getIncPuntos(){return e.incPuntos}static getRecord(){return e.hi}static getAplausos(){return e.aplausos}static getCameraScores(){return e.cameraScores}static getFlechaNro(){return e.flecha.lanzamientoNro}static setAnimaInicial(t){e.animaInicial=t}static setGameOver(t){e.gameOver=t}static setPuntos(t){e.puntos=t}static setIncPuntos(t){e.incPuntos=t}static setRecord(t){e.hi=t}static setCameraScores(t,a,s,o,i,r){e.cameraScores.x=t,e.cameraScores.y=a,e.cameraScores.ancho=s,e.cameraScores.alto=o,e.cameraScores.scrollX=i,e.cameraScores.scrollY=r}static setFlechaNro(t){e.flecha.lanzamientoNro=t}};t(s,"controlElegido",{mobile:!0,teclado:!1}),t(s,"screen",{width:800,height:600,numberWidths:4,numberHeights:1}),t(s,"animaInicial",!0),t(s,"gameOver",!1),t(s,"puntos",0),t(s,"incPuntos",0),t(s,"hi",238),t(s,"aplausos",{abucheos:200,aplausos:400}),t(s,"pausas",{flechaClavada:2800,showTxtInicial:15e3}),t(s,"jugador",{offSetX:10,offSetY:95}),t(s,"flecha",{nroFlechas:10,lanzamientoNro:0,changeCam:!1,iniX:-200,iniY:350,offSetX:12,offSetY:80}),t(s,"diana",{nroElementos:16,x:s.screen.width*(s.screen.numberWidths-2),y:420,ancho:2,alto:200,scaleX:1,scaleY:1}),t(s,"barraFuerza",{x:0,y:60,ancho:400,alto:30,padding:7}),t(s,"depth",{fondoScroll:0,tileSuelo:45,jugador:20,arco:30,flecha:35,diana:40,marcadores:50,textos:60}),t(s,"cameraScores",{x:0,y:0,ancho:800,alto:45,scrollX:0,scrollY:-50});let o=s;class i{constructor(e,t){this.relatedScene=e,this.datos=t}create(){const{x:e,y:t,txt:a,size:s,color:o,style:i,stroke:r,sizeStroke:n,shadowOsx:l,shadowOsy:c,shadowColor:h,bool1:d,bool2:g,origin:u,elastic:f,dura:m}=this.datos;this.texto=this.relatedScene.add.text(e,t,a,{fontSize:s+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:i}),this.texto.setOrigin(u[0],u[1]),this.texto.setStroke(r,n),this.texto.setShadow(l,c,h,2,d,g),this.elastic(a,f,m),console.log(this.texto)}elastic(e,t,a){a>0&&this.relatedScene.tweens.add({targets:this.texto,y:t,ease:"Elastic",duration:a})}get(){return this.texto}}class r extends a.Scene{constructor(){super({key:"iniciar"})}init(){this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/2),y:Math.floor(this.sys.game.config.height/2),txt:" Touch screen or \n \n click to start... ",size:60,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0})}preload(){this.load.image("fondo","assets/bg.png")}create(){this.add.image(0,0,"fondo").setOrigin(0,0),this.txt.create(),this.input.on("pointerdown",(()=>this.scene.start("preload"))),console.log(this.txt)}}class n extends a.Scene{constructor(){super({key:"preload"})}init(){const e=this.sys.game.config.width,t=this.sys.game.config.height;this.txt=new i(this,{x:Math.floor(e/2),y:Math.floor(t/3.5),txt:" Loading...",size:55,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.add.rectangle(Math.floor(e/2),Math.floor(t/2),Math.floor(e/1.5),Math.floor(t/12)).setStrokeStyle(1,16772744);const a=this.add.rectangle(Math.floor(e/2)-Math.floor(e/3)+4,Math.floor(t/2),4,Math.floor(t/14),16750865);this.load.on("progress",(t=>{a.width=Math.floor(e/1.52)*t}))}preload(){this.load.setPath("assets"),this.load.image("fondo-scroll","./img/fondo-cielo3200x600.png"),this.load.image("boton-nueva-partida","./img/boton-start.png"),this.load.spritesheet("boton-fullscreen","./img/boton-fullscreen.png",{frameWidth:64,frameHeight:64}),this.load.spritesheet("radio-buttons","./img/radio-buttons-ssheet.png",{frameWidth:50,frameHeight:50}),this.load.image("archery-img","./img/archeryImg.png"),this.load.image("tile-suelo","./img/tile-suelo.png"),this.load.image("barra-fuerza","./img/barra-energia.png"),this.load.image("diana","./img/diana-tiroArco.png"),this.load.spritesheet("arco","./img/arco-v3-ssheet.png",{frameWidth:75,frameHeight:100}),this.load.image("flecha","./img/flecha-v2.png"),this.load.image("flecha-c","./img/flecha-c.png"),this.load.spritesheet("jugador","./img/Ssheet_enemigo.png",{frameWidth:80,frameHeight:110}),this.load.audio("mario-tuberias","./audio/mario-tuberias.mp3"),this.load.audio("aplausos-birdie","./audio/aplausosbirdie.mp3"),this.load.audio("aplausos-eagle","./audio/aplausoseagle.mp3"),this.load.audio("arrow1","./audio/arrow1.mp3"),this.load.audio("arrow2","./audio/arrow2.mp3"),this.load.audio("abucheo","./audio/boooh.mp3")}create(){this.scene.start("menuprincipal")}}class l{constructor(e){this.relatedScene=e}create(){this.fondoscroll=this.relatedScene.add.image(-this.relatedScene.sys.game.config.width,0,"fondo-scroll").setOrigin(0,0).setDepth(o.depth.fondoScroll),console.log(this.fondoscroll)}get(){return this.fondoscroll}}function c(e,t){const{x:a,y:s,ancho:o,alto:i,pad:r}=t;e.add.rectangle(a-r,s-r,o+2*r,i+2*r,4535552).setStrokeStyle(3,16750864).setOrigin(0,0)}function h(e,t,a){e.volume=a,e.loop=t,e.play()}class d{constructor(e){this.relatedScene=e}create(e,t){const a=this.relatedScene.sys.game.config.width,s=this.relatedScene.sys.game.config.height;let o=1.5;"game"===e&&(o=1.25),t&&(o=3),this.boton=this.relatedScene.add.sprite(Math.floor(a/2),Math.floor(s/o),"boton-nueva-partida").setInteractive(),this.boton.setScale(.6).setAngle(1).setDepth(30),this.boton.on("pointerover",(()=>{this.boton.setScale(.7)})),this.boton.on("pointerout",(()=>{this.boton.setScale(.6)})),this.boton.on("pointerdown",(t=>{this.relatedScene.scene.start(e),console.log(t)})),this.relatedScene.tweens.add({targets:this.boton,angle:359,ease:"Elastic",yoyo:!0,hold:2e3,duration:3e3,repeat:-1})}get(){return this.boton}}class g{constructor(e,t){this.relatedScene=e,this.direccion=t}create(){this.relatedScene.sys.game.config.width,this.relatedScene.sys.game.config.height,this.boton=this.relatedScene.add.image(this.direccion.x,this.direccion.y,this.direccion.id).setInteractive(),this.boton.setScale(this.direccion.scX,this.direccion.scY),this.boton.setAngle(this.direccion.ang).setFrame(0).setDepth(50),this.boton.setX(this.direccion.x).setY(this.direccion.y),this.boton.on("pointerover",(()=>{this.boton.setScale(this.direccion.scX+.1,this.direccion.scY+.1)})),this.boton.on("pointerout",(()=>{this.boton.setScale(this.direccion.scX,this.direccion.scY)})),this.boton.on("pointerdown",(()=>{this.relatedScene.scale.isFullscreen?this.relatedScene.scale.stopFullscreen():this.relatedScene.scale.startFullscreen()}))}}class u{constructor(e,t){this.relatedScene=e,this.args=t}create(){const{left:e,top:t,frame:a,scale:s,texto:r,id:n}=this.args;this.radiobutton=this.relatedScene.add.sprite(e,t,"radio-buttons").setInteractive(),this.radiobutton.setOrigin(0,.5).setScale(s).setDepth(o.depth.textos).setFrame(a),this.radiobutton.setData("id",n),this.txt=new i(this.relatedScene,{x:e+60,y:t,txt:r,size:45,color:"#ffa",style:"bold",stroke:"#f71",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,.5],elastic:!1,dura:0}),this.txt.create(),this.radiobutton.on("pointerover",(()=>{this.txt.get().setScale(s+.1),this.radiobutton.setScale(s+.1)})),this.radiobutton.on("pointerout",(()=>{this.txt.get().setScale(s),this.radiobutton.setScale(s)})),this.radiobutton.on("pointerdown",(e=>{this.relatedScene.radiobuttons.forEach((e=>e.get().setFrame(0))),this.radiobutton.setFrame(1),Object.keys(o.controlElegido).forEach((e=>{o.controlElegido[e]=!1})),o.controlElegido[this.radiobutton.getData("id")]=!0,console.log(o.controlElegido.mobile,o.controlElegido.teclado)}))}get(){return this.radiobutton}}class f extends a.Scene{constructor(){super({key:"menuprincipal"})}init(){this.fondoscroll=new l(this),this.botoninicio=new d(this),this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/2),y:0,txt:" Archery ",size:110,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:Math.floor(this.sys.game.config.height/4),dura:3e3})}create(){this.sonidoMarioTuberias=this.sound.add("mario-tuberias"),this.fondoscroll.create(),this.add.image(this.sys.game.config.width/2,this.sys.game.config.height/1.6,"archery-img"),this.txt.create(),this.add.timeline([{at:1800,run:()=>{this.botoninicio.create("prenivel",!1)}}]).play(),h(this.sonidoMarioTuberias,!1,.7),console.log(this.txt)}}class m extends a.Scene{constructor(){super({key:"prenivel"})}init(){o.setPuntos(0),o.setIncPuntos(0),o.setAnimaInicial(!0),o.setGameOver(!1),o.setFlechaNro(0),this.fondoscroll=new l(this),this.botoninicio=new d(this),this.radiobuttons=[],this.radiobuttons.push(new u(this,{left:Math.floor(this.sys.game.config.width/18),top:Math.floor(this.sys.game.config.height/1.9),frame:1,scale:1,texto:" Touch / mouse ",id:"mobile"})),this.radiobuttons.push(new u(this,{left:Math.floor(this.sys.game.config.width/18),top:Math.floor(this.sys.game.config.height/1.55),frame:0,scale:1,texto:" Keyboard / spacebar ",id:"teclado"})),this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/20),y:Math.floor(this.sys.game.config.height/25),txt:" Press and keep press space bar\n or if you use a touch device,\n touch and keep touch\n to shoot an arrow.",size:38,color:"#ffa",style:"bold",stroke:"#2f2",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,0],elastic:!1,dura:0})}create(){this.fondoscroll.create(),this.txt.create(),this.radiobuttons.forEach((e=>e.create())),this.botoninicio.create("game",!1),console.log(this.txt)}}class p{constructor(e){this.relatedScene=e}create(){c(this.relatedScene,{x:o.barraFuerza.x,y:o.barraFuerza.y,ancho:o.barraFuerza.ancho,alto:o.barraFuerza.alto,pad:o.barraFuerza.padding}),this.barrafuerza=this.relatedScene.add.sprite(o.barraFuerza.x,o.barraFuerza.y,"barra-fuerza"),this.barrafuerza.setOrigin(0,0).setScale(.1,1).setTint(65312),this.barrafuerza.setX(o.barraFuerza.x).setY(o.barraFuerza.y)}get(){return this.barrafuerza}}class y{constructor(e){this.relatedScene=e}create(){this.jugador=this.relatedScene.physics.add.sprite(this.relatedScene.sys.game.config.width/o.jugador.offSetX,this.relatedScene.sys.game.config.height-o.jugador.offSetY,"jugador"),this.jugador.setData("fin-pulsacion",!1),this.jugador.setData("ini-pulsacion",!1),this.jugador.setData("pow",.1),this.jugador.setData("inc-pow",.05),this.jugador.setData("multiplicador",300),this.jugador.setCollideWorldBounds(!0),this.jugador.setVisible(!1).setFrame(11).setDepth(o.depth.jugador),this.controles=this.relatedScene.input.keyboard.createCursorKeys(),console.log(this.jugador)}update(){o.isGameOver()||(this.incrementando_fuerza_pulsando(),this.pulsacion_inicial(),this.soltar_lanzarFlecha())}incrementando_fuerza_pulsando(){(this.jugador.getData("ini-pulsacion")&&!this.jugador.getData("fin-pulsacion")&&o.controlElegido.teclado||this.jugador.getData("ini-pulsacion")&&!this.jugador.getData("fin-pulsacion")&&this.relatedScene.input.activePointer.isDown&&o.controlElegido.mobile)&&(console.log("...sum"),this.jugador.setData("pow",this.jugador.getData("pow")+this.jugador.getData("inc-pow")),this.relatedScene.barrafuerza.get().setScale(this.jugador.getData("pow"),1))}pulsacion_inicial(){this.jugador.body.touching.down&&!this.jugador.getData("fin-pulsacion")&&!this.jugador.getData("ini-pulsacion")&&"pre"===this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro].getData("estado")&&(this.controles.space.isDown&&o.controlElegido.teclado||this.relatedScene.input.activePointer.isDown&&o.controlElegido.mobile)&&(console.log("pulsando..."),this.jugador.setData("ini-pulsacion",!0))}soltar_lanzarFlecha(){this.jugador.body.touching.down&&!this.jugador.getData("fin-pulsacion")&&this.jugador.getData("ini-pulsacion")&&"pre"===this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro].getData("estado")&&(this.controles.space.isUp&&o.controlElegido.teclado||!this.relatedScene.input.activePointer.isDown&&o.controlElegido.mobile)&&(this.jugador.setData("fin-pulsacion",!0),this.jugador.setData("ini-pulsacion",!1),this.relatedScene.arco.get().setFrame(1),this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro].setData("estado","lanzando"),this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro].setVelocityX(this.jugador.getData("pow")*this.jugador.getData("multiplicador")).setVelocityY(-this.jugador.getData("pow")*(this.jugador.getData("multiplicador")-50)),this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro].body.setAllowGravity(!0),console.log("pulsado!"),console.log(this.jugador.getData("pow")*this.jugador.getData("multiplicador")),this.jugador.setData("pow",.1),h(this.relatedScene.sonidoArrow1,!1,.9))}get(){return this.jugador}}class b{constructor(e){this.relatedScene=e}create(){this.jugadoranima=this.relatedScene.physics.add.sprite(this.relatedScene.diana.get().getChildren()[0].x-100,this.relatedScene.sys.game.config.height-o.jugador.offSetY,"jugador"),this.jugadoranima.setCollideWorldBounds(!0),this.jugadoranima.setFrame(10).setFlipX(!0).setDepth(o.depth.jugador),this.jugadoranima.setVelocityX(-200),this.relatedScene.anims.create({key:"jugador-anima-inicial",frames:this.relatedScene.anims.generateFrameNumbers("jugador",{frames:[9,10]}),frameRate:10,repeat:-1}),this.jugadoranima.anims.play("jugador-anima-inicial"),console.log(this.jugadoranima)}update(){this.jugadoranima.x<=this.relatedScene.sys.game.config.width/o.jugador.offSetX&&(o.setAnimaInicial(!1),this.jugadoranima.destroy(),this.relatedScene.txt.get().setVisible(!0),this.relatedScene.jugador.get().setVisible(!0),this.relatedScene.arco.get().setVisible(!0),this.relatedScene.flecha.get().getChildren()[0].setVisible(!0),this.relatedScene.cameras.main.startFollow(this.relatedScene.flecha.get().getChildren()[o.flecha.lanzamientoNro]))}get(){return this.jugadoranima}}class w{constructor(e){this.relatedScene=e}create(e,t){this.arco=this.relatedScene.physics.add.sprite(e,t,"arco",0),this.arco.setVisible(!1).setScale(1,.8).setDepth(o.depth.arco),this.arco.body.setAllowGravity(!1),console.log(this.arco)}update(e,t){const a=e+1,s=t+12;this.arco.setX(a).setY(s)}get(){return this.arco}}class S{constructor(e){this.relatedScene=e}create(){this.flecha=this.relatedScene.physics.add.group();for(let e=0;e<o.flecha.nroFlechas;e++)this.flecha.create(o.flecha.iniX,o.flecha.iniY+20*e,"flecha");this.flecha.children.iterate(((e,t)=>{e.setScale(1,1).setAngle(0).setDepth(o.depth.flecha),e.setVelocityX(0).setVelocityY(0),e.setCircle(4,Math.floor(e.body.width/1.8),Math.floor(e.body.height/2-4)),e.setCollideWorldBounds(!0),e.body.setAllowGravity(!1),e.setData("ajuste-clavar-diana",0),e.setData("angulo",7),e.setData("ajuste-division-angulo",20),e.setData("estado","null"),0===t&&e.setData("estado","pre").setVisible(!1)})),c(this.relatedScene,{x:o.flecha.iniX-50,y:o.flecha.iniY,ancho:100,alto:20*o.flecha.nroFlechas,pad:10}),console.log(this.flecha)}update(){this.flecha.children.iterate((e=>{"pre"===e.getData("estado")&&(e.setX(this.relatedScene.sys.game.config.width/10+o.flecha.offSetX),e.setY(this.relatedScene.sys.game.config.height-o.flecha.offSetY)),"lanzando"===e.getData("estado")&&e.setAngle(e.body.velocity.y/e.getData("ajuste-division-angulo"))}))}get(){return this.flecha}}class x{constructor(e){this.relatedScene=e}create(){const e=Phaser.Math.Between(0,this.relatedScene.sys.game.config.width);this.diana=this.relatedScene.physics.add.group();for(let t=0;t<o.diana.nroElementos;t++)this.diana.create(o.diana.x-e+t*o.diana.ancho,o.diana.y,"diana");this.coloresAreasImpacto=[16776960,16776960,16776960,16776960,16639,16639,16639,16639,15601664,15601664,15601664,15601664,1092128,1092128,1092128,1092128],this.diana.children.iterate(((e,t)=>{e.setData("index",t),e.setScale(1,t/10*1),e.setDepth(o.depth.diana).setTint(this.coloresAreasImpacto[t]),e.setVelocityX(0).setVelocityY(0),e.body.setAllowGravity(!1),e.setImmovable(!0)})),console.log(this.diana)}update(){}get(){return this.diana}}class j{constructor(e,t){this.relatedScene=e,this.datos=t}create(){const{x:e,y:t,txt:a,size:s,color:o,style:i,stroke:r,sizeStroke:n,shadowOsx:l,shadowOsy:c,shadowColor:h,bool1:d,bool2:g,origin:u,elastic:f,dura:m}=this.datos;this.marcador=this.relatedScene.add.text(e,t,a,{fontSize:s+"px",fill:o,fontFamily:"verdana, arial, sans-serif",fontStyle:i}),this.marcador.setOrigin(u[0],u[1]),this.marcador.setStroke(r,n),this.marcador.setShadow(l,c,h,2,d,g),this.elastic(a,f,m),console.log(this.marcador)}update(e,t){this.marcador.setText(`${e}${t}`)}elastic(e,t,a){a>0&&this.relatedScene.tweens.add({targets:this.marcador,y:t,ease:"Elastic",duration:a})}get(){return this.marcador}}class z{constructor(e){this.relatedScene=e}create(){const e=this.relatedScene.sys.game.config.height;this.tilesuelo=this.relatedScene.physics.add.sprite(-this.relatedScene.sys.game.config.width/2,e,"tile-suelo"),this.tilesuelo.setOrigin(0,.5).setScale(45,1).setDepth(o.depth.tileSuelo),this.tilesuelo.setImmovable(!0),this.tilesuelo.body.setAllowGravity(!1),console.log(this.tilesuelo)}get(){return this.tilesuelo}}t(z,"sizeXY",[64,64]);class D extends a.Scene{constructor(){super({key:"game"})}init(){this.fondoscroll=new l(this),this.tilesuelo=new z(this),this.barrafuerza=new p(this),this.jugador=new y(this),this.arco=new w(this),this.flecha=new S(this),this.diana=new x(this),this.jugadoranima=new b(this),this.instancia_marcadores(),this.botonrejugar=new d(this),this.txt=new i(this)}preload(){}create(){this.sonidos_set(),this.set_camerasMain(),this.set_cameras_marcadores(),this.fondoscroll.create(),this.tilesuelo.create(),this.barrafuerza.create(),this.jugador.create(),this.arco.create(this.jugador.get().x,this.jugador.get().y),this.flecha.create(),this.diana.create(),this.jugadoranima.create(),this.marcadorPtos.create(),this.marcadorIncPtos.create(),this.marcadorHi.create(),this.marcadorHi.update(" Record: ",o.getRecord()),this.botonfullscreen.create(),this.texto_preparado(),this.mouse_showXY={create:this.add.text(10,50," ",{fill:"#111"}),show_mouseXY:!0},this.cameras.main.startFollow(this.jugadoranima.get()),this.crear_colliders()}update(){o.isAnimaInicial()&&this.jugadoranima.update(),this.jugador.update(),this.arco.update(this.jugador.get().x,this.jugador.get().y),this.flecha.update()}set_camerasMain(){const{numberWidths:e,numberHeights:t}=o.getScreen();this.cameras.main.setBounds(-this.sys.game.config.width,0,Math.floor(this.sys.game.config.width*e),Math.floor(this.sys.game.config.height*t)),this.physics.world.setBounds(-this.sys.game.config.width,0,Math.floor(this.sys.game.config.width*e),Math.floor(this.sys.game.config.height*t)),console.log(this.physics.world)}set_cameras_marcadores(){var{x:e,y:t,ancho:a,alto:s,scrollX:i,scrollY:r}=o.getCameraScores();this.mapa_scores=this.cameras.add(e,t,a,s).setZoom(.9).setName("view-scores").setAlpha(1).setOrigin(0,0),this.mapa_scores.scrollX=i,this.mapa_scores.scrollY=r,this.mapa_scores.setBackgroundColor(43707),console.log(this.mapa_scores)}instancia_marcadores(){const e=this.sys.game.config.width;this.marcadorPtos=new j(this,{x:0,y:-55,txt:" Score: 0",size:35,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:10,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,0],elastic:!1,dura:0}),this.marcadorIncPtos=new j(this,{x:Math.floor(e/2.6),y:-58,txt:" 0 ",size:45,color:"#ffa",style:"bold",stroke:"#4f2",sizeStroke:14,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,0],elastic:!1,dura:0}),this.marcadorHi=new j(this,{x:Math.floor(e/1.7),y:-55,txt:" Record: ",size:35,color:"#ffa",style:"bold",stroke:"#f51",sizeStroke:10,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[0,0],elastic:!1,dura:0}),this.botonfullscreen=new g(this,{id:"boton-fullscreen",x:Math.floor(this.sys.game.config.width/1),y:-25,ang:0,scX:.8,scY:.6})}nextFlecha_cambioCamera(e,t,a){"clavada"===e.getData("estado")||o.isGameOver()||(setTimeout((()=>{o.flecha.lanzamientoNro++,console.log(o.flecha.lanzamientoNro),this.barrafuerza.get().setScale(.1,1),o.flecha.lanzamientoNro>=10?(console.log("game over"),o.setGameOver(!0),this.suenan_aplausos(e)):(this.flecha.get().getChildren()[o.flecha.lanzamientoNro].setData("estado","pre"),this.cameras.main.startFollow(this.flecha.get().getChildren()[o.flecha.lanzamientoNro]),this.arco.get().setFrame(0))}),o.pausas.flechaClavada),e.setData("estado","clavada"),e.setVelocityX(0).setVelocityY(0),e.body.setAllowGravity(!1),a&&this.impacto_diana_sumarPtos(e,t),this.jugador.get().setY(this.sys.game.config.height-o.jugador.offSetY),this.jugador.get().setData("fin-pulsacion",!1))}impacto_diana_sumarPtos(e,t){h(this.sonidoArrow2,!1,.9),e.setX(Math.floor(e.x)+e.getData("ajuste-clavar-diana"));const a=5*(o.diana.nroElementos-t)+Phaser.Math.Between(0,2);o.setIncPuntos(a),this.marcadorIncPtos.update(" ",a),o.setPuntos(o.getPuntos()+a),this.marcadorPtos.update(" Score: ",o.getPuntos()),console.log(t,a)}suenan_aplausos(e){o.getPuntos()>=o.getAplausos().aplausos?h(this.sonidoAplausosEagle,!1,.9):o.getPuntos()>=o.getAplausos().abucheos?h(this.sonidoAplausosBirdie,!1,.9):h(this.sonidoAbucheo,!1,.9),o.getPuntos()>o.getRecord()&&(o.setRecord(o.getPuntos()),this.txtNewrecord=new i(this,{x:Math.floor(this.diana.get().getChildren()[0].x),y:50,txt:" Congratulations! \n New Record! ",size:70,color:"#ffa",style:"bold",stroke:"#f91",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,0],elastic:this.sys.game.config.height/2,dura:3e3}),this.txtNewrecord.create()),setTimeout((()=>{this.botonrejugar.create("prenivel",!0),this.botonrejugar.get().setX(this.diana.get().getChildren()[0].x),this.cameras.main.startFollow(this.diana.get().getChildren()[0])}),o.pausas.flechaClavada)}crear_colliders(){this.physics.add.collider(this.jugador.get(),this.tilesuelo.get()),this.physics.add.collider(this.jugadoranima.get(),this.tilesuelo.get()),this.physics.add.collider(this.flecha.get(),this.tilesuelo.get(),((e,t)=>this.nextFlecha_cambioCamera(t,0,!1))),this.physics.add.collider(this.flecha.get(),this.diana.get(),((e,t)=>this.nextFlecha_cambioCamera(e,t.getData("index"),!0)))}texto_preparado(){this.txt=new i(this,{x:Math.floor(this.sys.game.config.width/5),y:Math.floor(this.sys.game.config.height/2),txt:" Pulsa y deja pulsada la tecla space \n o si utilizas un dispositivo tactil \n toca y deja presionada \n para tirar una flecha.",size:25,color:"#ffa",style:"bold",stroke:"#2f2",sizeStroke:16,shadowOsx:2,shadowOsy:2,shadowColor:"#111",bool1:!1,bool2:!0,origin:[.5,.5],elastic:!1,dura:0}),this.txt.create(),this.txt.get().setVisible(!1),setTimeout((()=>this.txt.get().destroy()),o.pausas.showTxtInicial)}sonidos_set(){this.sonidoAplausosBirdie=this.sound.add("aplausos-birdie"),this.sonidoAplausosEagle=this.sound.add("aplausos-eagle"),this.sonidoAbucheo=this.sound.add("abucheo"),this.sonidoArrow1=this.sound.add("arrow1"),this.sonidoArrow2=this.sound.add("arrow2")}pointer_showXY({create:e,show_mouseXY:t}){if(!t)return;const a=this.input.activePointer;e.setText([`x: ${a.worldX}`,`y: ${a.worldY}`]).setX(this.jugador.get().x).setY(this.jugador.get().y-170)}}const v={type:Phaser.AUTO,width:800,height:600,parent:"game-container",scene:[r,n,f,m,D],physics:{default:"arcade",arcade:{gravity:{y:700},debug:!1}},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH}};new Phaser.Game(v);
